@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Cyber Noir brand vars === */
:root{
  --cn-bg:#0B0F19;        /* page background */
  --cn-surface:#111827;   /* cards / surfaces */
  --cn-text:#E5E7EB;      /* primary text */
  --cn-sub:#94A3B8;       /* secondary text */
  --cn-cyan:#22D3EE;      /* primary action */
  --cn-lime:#A3E635;      /* accent */
  --cn-purple:#7C3AED;    /* mid of logo gradient */

  /* cursor spotlight defaults (updated by JS) */
  --mx: 50%;
  --my: 40%;
}

/* =========================================================
   BASE PAGE THEME — now uses bg.png
   ========================================================= */
body{
  background: var(--cn-bg) url('/bg.png') center/cover no-repeat;
  color: var(--cn-text);
}
@media (min-width: 1024px){
  body{ background-attachment: fixed; }
}
html, body { overflow-x: hidden; }

/* =========================================================
   BG SCENE LAYOUT
   ========================================================= */
.bg-scene{
  position: absolute;
  inset: -48px;                 /* overscan/bleed to hide pan edges */
  transform: translate3d(0,0,0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Background image behaviour
   Desktop: no crop (contain). Gentle translate-only pan.
   Mobile : fill & crop from RIGHT so subject stays visible. */
.bgfx-image{
  object-fit: contain;
  object-position: center center;
  animation: bg-pan-contain 50s ease-in-out infinite;
}
@keyframes bg-pan-contain {
  0%   { transform: translate3d(0,0,0); }
  50%  { transform: translate3d(-16px,-10px,0); }
  100% { transform: translate3d(10px,12px,0); }
}

/* Mobile framing: crop from right (80%) so human stays in view */
@media (max-width: 768px){
  .bgfx-image{
    object-fit: cover;
    object-position: 80% center; /* push focus to the right */
    animation: bg-pan 40s ease-in-out infinite;
  }
}

/* Slow pan used on mobile (with slight scale to avoid edge flashes) */
@keyframes bg-pan {
  0%   { transform: scale(1.025) translate3d(0,0,0); }
  50%  { transform: scale(1.035) translate3d(-12px,-8px,0); }
  100% { transform: scale(1.025) translate3d(8px,10px,0); }
}

/* =========================================================
   CURSOR SPOTLIGHT
   ========================================================= */
.cursor-spotlight{
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(260px 260px at var(--mx) var(--my),
      rgba(255,255,255,0.14),
      rgba(255,255,255,0.08) 35%,
      rgba(255,255,255,0.00) 68%);
  mix-blend-mode: screen;
  opacity: .7;
  transition: background-position .08s linear;
  will-change: background-position;
}

/* =========================================================
   LIGHT SWEEP & SCANLINES
   ========================================================= */
.light-sweep{
  position: absolute;
  inset: -20% -20%;
  background:
    radial-gradient(40% 70% at 0% 0%,
      rgba(255,255,255,.06), rgba(255,255,255,0) 60%) ,
    linear-gradient(115deg,
      rgba(34,211,238,.10) 0%,
      rgba(124,58,237,.08) 50%,
      rgba(34,211,238,.10) 100%);
  mix-blend-mode: screen;
  animation: sweep 16s linear infinite;
  pointer-events: none;
  will-change: transform;
  backface-visibility: hidden;
}
@keyframes sweep {
  0%   { transform: translate3d(-15%, -10%, 0) rotate(0.001deg); }
  50%  { transform: translate3d(10%, 10%, 0) rotate(0.001deg); }
  100% { transform: translate3d(25%, -15%, 0) rotate(0.001deg); }
}

.scanlines{
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.03) 0px,
      rgba(255,255,255,0.03) 1px,
      transparent 2px,
      transparent 4px
    );
  animation: scan-drift 18s linear infinite;
  opacity: .06;
  pointer-events: none;
  will-change: transform;
  backface-visibility: hidden;
}
@keyframes scan-drift {
  from { transform: translateY(0); }
  to   { transform: translateY(-32px); }
}

/* =========================================================
   AURORA BLOBS
   ========================================================= */
.aurora{
  border-radius: 50%;
  filter: blur(60px);
  opacity: .68;
  background:
    radial-gradient(45% 45% at 50% 50%, rgba(34,211,238,.55), transparent 60%),
    radial-gradient(35% 35% at 70% 30%, rgba(124,58,237,.48), transparent 60%),
    radial-gradient(35% 35% at 30% 70%, rgba(163,230,53,.38), transparent 60%);
  animation: aurora-move 18s ease-in-out infinite alternate;
  will-change: transform, opacity, filter;
  backface-visibility: hidden;
}
.aurora-2{ animation-duration: 22s; transform: rotate(6deg); }
.aurora-3{ animation-duration: 26s; transform: rotate(-4deg); }

@keyframes aurora-move{
  0%   { transform: translate3d(0,0,0) scale(1);   opacity: .62; }
  50%  { transform: translate3d(42px,-24px,0) scale(1.06); opacity: .76; }
  100% { transform: translate3d(-36px,30px,0) scale(.98);  opacity: .62; }
}

/* =========================================================
   HEX GRID DRIFT
   ========================================================= */
@keyframes hex-drift {
  0%   { transform: translate3d(0,0,0); }
  100% { transform: translate3d(0,-28px,0); }
}
.animate-hex-drift {
  animation: hex-drift 25s linear infinite alternate;
  will-change: transform;
  backface-visibility: hidden;
}

/* =========================================================
   MOBILE / REDUCED MOTION
   ========================================================= */
@media (max-width: 1024px), (prefers-reduced-motion: reduce){
  .light-sweep,
  .scanlines,
  .aurora,
  .animate-hex-drift,
  .cursor-spotlight{
    animation: none !important;
    display: none !important;
  }
}

/* =========================================================
   GLOBAL HELPERS
   ========================================================= */
.gradient-text{
  background:linear-gradient(90deg,var(--cn-cyan),var(--cn-purple),var(--cn-lime));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
@keyframes hue-spin{ from{filter:hue-rotate(0)} to{filter:hue-rotate(360deg)} }
.animate-hue{ animation:hue-spin 10s linear infinite; will-change:filter; }

.shimmer{
  background:linear-gradient(90deg,
    rgba(255,255,255,.08) 25%,
    rgba(255,255,255,.35) 37%,
    rgba(255,255,255,.08) 63%);
  background-size:400% 100%;
}
.parallax{ perspective:800px; transform-style:preserve-3d; }
.text-shadow-sm{ text-shadow:0 1px 2px rgba(0,0,0,.15); }
.text-shadow-lg{ text-shadow:0 2px 10px rgba(0,0,0,.45); }

.btn-ghost-contrast{
  background:rgba(255,255,255,.28);
  border-color:rgba(255,255,255,.55);
  color:#1f2937;
  backdrop-filter:blur(3px);
}
.btn-ghost-contrast:hover{
  background:rgba(255,255,255,.5);
  border-color:rgba(255,255,255,.8);
  color:#111827;
}

.card-hover:hover{
  box-shadow:0 8px 28px rgba(0,0,0,.08);
  outline:2px solid rgba(34,211,238,0.25);
  outline-offset:0;
  transition:outline-color .2s ease, box-shadow .2s ease, transform .2s ease;
}

/* =========================================================
   FORMS
   ========================================================= */
.input,
.select,
.textarea{
  background-color:#ffffff !important;
  color:#0f172a !important;
  border-color:rgba(148,163,184,.5);
}
.input::placeholder,
.textarea::placeholder{
  color:#94a3b8 !important;
  opacity:1 !important;
}
.label .label-text,
.label .label-text-alt{ color:#334155 !important; }
.checkbox{
  border-color:rgba(148,163,184,.6);
  background:#ffffff;
}
.checkbox:checked{
  background:var(--cn-cyan);
  border-color:var(--cn-cyan);
}

/* Chrome autofill */
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill{
  -webkit-text-fill-color:#0f172a !important;
  transition:background-color 5000s ease-in-out 0s;
}

/* Disabled button still readable */
.btn:disabled{ opacity:.75; cursor:not-allowed; }

/* Responsive type helpers */
@media (max-width: 640px){
  .label .label-text{ font-size:.9rem; }
  .label .label-text-alt{ font-size:.75rem; }
  .alert{ font-size:.9rem; }
}

/* Form mobile readability + wrapping */
.label .label-text,
.label .label-text-alt { white-space: normal; line-height: 1.25; }
.textarea { resize: vertical; }
.form-responsive { font-size: 15px; }

@media (max-width: 420px) {
  .form-responsive { font-size: 14px; }
  .form-responsive .input,
  .form-responsive .select,
  .form-responsive .textarea { padding-top: .65rem; padding-bottom: .65rem; }
  .form-responsive .label .label-text      { font-size: .9rem; }
  .form-responsive .label .label-text-alt  { font-size: .75rem; }
  .form-responsive .checkbox { width: 1rem; height: 1rem; min-width: 1rem; }
  .form-responsive .btn { padding-top: .9rem; padding-bottom: .9rem; line-height: 1.1; }
}

/* Footer CTA responsiveness */
.footer-cta-responsive .btn,
.footer-cta-responsive .btn-sm { min-height: 48px; }
@media (max-width: 420px){
  .footer-cta-responsive .btn,
  .footer-cta-responsive .btn-sm{
    min-height:44px !important;
    padding:.5rem .875rem !important;
    font-size:.925rem !important;
    line-height:1.25rem !important;
  }
  .footer-cta-responsive .btn svg,
  .footer-cta-responsive .btn-sm svg{ width:18px; height:18px; }
}

/* =========================================================
   Legacy helpers — also updated to bg.png
   ========================================================= */
.bgfx-image-wrap{
  position:fixed; inset:0; z-index:-1; overflow:hidden; background:#0B0F19;
}
.bgfx-image{
  width:100%; height:100%; object-fit:cover; object-position:center;
  filter:brightness(.9); pointer-events:none;
}
.bgfx-overlay{
  position:absolute; inset:0;
  background:linear-gradient(180deg,rgba(0,0,0,.15) 0%,rgba(0,0,0,.25) 40%,rgba(0,0,0,.35) 100%);
  pointer-events:none;
}

/* Respect data/motion savings */
@media (prefers-reduced-motion: reduce){
  .bgfx-image-wrap{ display:none !important; }
  body{ background:#0B0F19 url('/bg.png') center/cover no-repeat; }
}
@media (prefers-reduced-data: reduce){
  .bgfx-image-wrap{ display:none !important; }
  body{ background:#0B0F19 url('/bg.png') center/cover no-repeat; }
}
